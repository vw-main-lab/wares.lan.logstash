#############################################
#            Generated by Ansible           #
#############################################
input {
{% for wares_lan_logstash_beats in wares_lan_logstash.inputs.beats if wares_lan_logstash_beats.enabled %}
  beats {
    id => "{{ wares_lan_logstash_beats.id }}"
    port => {{ wares_lan_logstash_beats.port }}
  }
{% endfor %}
}

output {
{% if wares_lan_logstash.outputs.elasticsearch.enabled == true %}
  elasticsearch {
    hosts => [{% for wares_lan_logstash_elasticsearch_host in wares_lan_logstash.outputs.elasticsearch.hosts if wares_lan_logstash_elasticsearch_host.enabled %}{% if not loop.first %}, {% endif %}"{{ wares_lan_logstash_elasticsearch_host.url }}:{{ wares_lan_logstash_elasticsearch_host.port }}"{% endfor %}]
    index => "{{ wares_lan_logstash.outputs.elasticsearch.index }}"
    ilm_enabled => {{ wares_lan_logstash.outputs.elasticsearch.ilm_enabled |lower }}
    ssl => {{ wares_lan_logstash.outputs.elasticsearch.ssl_enabled |lower }} 
    ssl_certificate_verification => {{ wares_lan_logstash.outputs.elasticsearch.ssl_certificate_verification |lower }}
{% if wares_lan_logstash.outputs.elasticsearch.cacert != "" %}
    cacert => "{{ wares_lan_logstash.outputs.elasticsearch.cacert }}"
{% endif %}
{% if wares_lan_logstash.outputs.elasticsearch.auth.api_key != "" %}
    api_key => "{{ wares_lan_logstash.outputs.elasticsearch.auth.api_key }}"
{% elif wares_lan_logstash.outputs.elasticsearch.auth.username != "" %}
    user => "{{ wares_lan_logstash.outputs.elasticsearch.auth.username }}"
    password => "{{ wares_lan_logstash.outputs.elasticsearch.auth.password }}"
{% endif %}
  }
{% endif %}
{% if wares_lan_logstash.outputs.kafka.enabled == true %}
  kafka {
    bootstrap_servers => [{% for wares_lan_logstash_kafka_host in wares_lan_logstash.outputs.kafka.hosts if wares_lan_logstash_kafka_host.enabled %}{% if not loop.first %}, {% endif %}"{{ wares_lan_logstash_kafka_host.servername }}:{{ wares_lan_logstash_kafka_host.port }}"{% endfor %}]
    codec => "{{ wares_lan_logstash.outputs.kafka.codec }}"
    topic_id => "{{ wares_lan_logstash.outputs.kafka.topic_id }}"
    id => "{{ wares_lan_logstash.outputs.kafka.id }}"
  }
{% endif %}
}
#############################################
